{% extends 'base.html.twig' %}

{% block body %}
{% if is_granted('ROLE_USER') %}
        {% set empty = 'true' %}

        {% for courseType in courseTypes %}
            {% if courseType.visibility and not courseType.deleted %}
                {% set empty = 'false' %}


           <table width="700" class="table-striped">
               <tr>
                   <th colspan="2" class="alert-danger">
                       <a href={{ path('coursetype_show', { 'id': courseType.id }) }}>{{ courseType.name }}</a>
                   </th>
               </tr>
               <tr>
                   <td colspan="2">
                       <div  class="btn-group btn-group-justified">
                       <a href="#" class="btn btn-default">O KURZE</a>
                       <a href="#" class="btn btn-default">TERMÍNY</a>
                       </div>

                   </td>
               </tr>


               <tr>
                   <td colspan="2">{{ courseType.description }}</td>
               </tr>
               <tr>
                   <td><b>Soft - mimoaplikačné:</b></td>
                   <td><b>Hard - vnútroaplikačné:</b></td>
               </tr>
               <tr>
                   <td>
                       <ol>
                           {% for sp in courseType.softPrerequisites %}
                               <li>{{ sp.value }}</li>
                           {% endfor %}
                       </ol>
                   </td>
                   <td>
                       <ol>
                           {% for hp in courseType.hardPrerequisites %}
                               <li>{{ hp.name }}</li>
                           {% endfor %}
                       </ol>
                   </td>
               </tr>

                <tr>
                    <td colspan="2">
                    <table  width="700" class="table-striped">
                        <tr >
                            <th>Dátum konania </th>
                            <th>Čas konania </th>
                            <th>Miesto konania </th>
                            <th>Školiteľ </th>
                            <th>Obsadenosť </th>
                            <th>Prihlásenie</th>
                        </tr>
                        {% if courseType.courseInstances|length == 0 %}
                            <tr>
                            <td colspan="6">Pre tento kurz nie je momentálne vypísaný žiaden termín.</td>
                            </tr>
                        {% endif %}
                     {% for instance in courseType.courseInstances %}
                            <tr>
                                <td>{{ instance.timestamp|date('d.m.Y') }}</td>
                                <td>{{ instance.timestamp|date('H:i') }}</td>
                                <td>{{ instance.place }}</td>
                                <td>{{ instance.supervisor }}</td>
                                <td>{{ instance.enrolleds|length }}/{{ instance.capacity }}</td>

                                <td><a href="{{ path('enrolled_new', { 'course_instance': instance.id }) }}" class="btn btn-default">Prihlásiť sa</a></td>
                            </tr>
                        {% endfor %}

                    </table>
                    </td>
                </tr>
           </table>

            {% endif %}
        {% endfor %}

        {% if empty == 'true' %}
            <div>Momentálne nie sú k dispozícii žiadne kurzy.</div>
        {% endif %}

  <!--  <ul>
        <li>
            <a href="{{ path('coursetype_new') }}">Create a new courseType</a>
        </li>
    </ul> -->
{% endif %}
{% endblock %}
