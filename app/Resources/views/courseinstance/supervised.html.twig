{% extends 'base.html.twig' %}

{% block title %}Vedené kurzy{% endblock %}

{% block body %}
    {% if is_granted('ROLE_SUPERVISOR') and supervisor.id == app.user.id %}
        {% set empty = true %}
        <h4>Aktuálne kurzy</h4>
        {% for courseInstance in courseInstances %}
            {% if courseInstance.supervisor.id == app.user.id and date(courseInstance.timestamp) > date() %}
                {% set empty = false %}
                <div>
                    <h4>{{ courseInstance.courseType.name }}</h4>
                    {{ courseInstance.courseType.description }}
                    <table width="700" class="table-striped">
                        <tr id="tableHeader2">
                            <th>Dátum</th>
                            <th>Čas</th>
                            <th>Miesto</th>
                            <th>Školiteľ </th>
                            <th>Obsadenosť </th>
                        </tr>
                        <tr>
                            <td>{{ courseInstance.timestamp|date('d.m.Y') }}</td>
                            <td>{{ courseInstance.timestamp|date('H:i') }}</td>
                            <td>{{ courseInstance.place }}</td>
                            <td>{{ courseInstance.supervisor }}</td>
                            <td>{{ courseInstance.enrolleds|length }}/{{ courseInstance.capacity }}</td>
                        </tr>
                    </table>
                    <a href="{{ path('courseinstance_show', { 'id': courseInstance.id }) }}" class="btn btn-default">Zoznam prihlásených</a>
                    <a href="{{ path('courseinstance_edit', { 'id': courseInstance.id }) }}" class="btn btn-default">Upraviť</a>
                </div>
            {% endif %}
        {% endfor %}

        {% if empty %}
            Momentálne nevediete žiadne termíny kurzov.
        {% endif %}

        {% set empty = true %}

        <h4>V minulosti</h4>

        {% for courseInstance in courseInstances %}
            {% if courseInstance.supervisor.id == app.user.id and date(courseInstance.timestamp) <= date() %}
                {% set empty = false %}
                <div>
                    <h4>{{ courseInstance.courseType.name }}</h4>
                    {{ courseInstance.courseType.description }}
                    <table width="700" class="table-striped">
                        <tr id="tableHeader2">
                            <th>Dátum</th>
                            <th>Čas</th>
                            <th>Miesto</th>
                            <th>Školiteľ </th>
                            <th>Obsadenosť </th>
                        </tr>
                        <tr>
                            <td>{{ courseInstance.timestamp|date('d.m.Y') }}</td>
                            <td>{{ courseInstance.timestamp|date('H:i') }}</td>
                            <td>{{ courseInstance.place }}</td>
                            <td>{{ courseInstance.supervisor }}</td>
                            <td>{{ courseInstance.enrolleds|length }}/{{ courseInstance.capacity }}</td>
                        </tr>
                    </table>
                    <a href="{{ path('courseinstance_show', { 'id': courseInstance.id }) }}" class="btn btn-default">Zoznam prihlásených</a>
                    <a href="{{ path('courseinstance_edit', { 'id': courseInstance.id }) }}" class="btn btn-default">Upraviť</a>
                </div>
            {% endif %}
        {% endfor %}

        {% if empty %}
            V minulosti ste neviedli žiadne termíny kurzov.
        {% endif %}

    {% endif %}
{% endblock %}